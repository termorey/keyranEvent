{"version":3,"sources":["domains/general/modules/events/2021/event1/index.jsx","domains/general/modules/events/2021/event1/components/story.js","domains/general/modules/events/2021/event1/index.module.css","domains/general/modules/modules/modules.js","domains/general/modules/modules lazy /^/.*/index$/ groupOptions: {} namespace object"],"names":["Sound","audio","Audio","settings","defaultMuted","defaultVolume","defaultLoop","set","url","this","src","volume","loop","muted","play","catch","err","console","log","update","a","delay","ms","Promise","resolve","setTimeout","timer","volumeDelta","i","vol","pause","change","val","Video","video","autoPlay","controls","type","format","Index","props","useState","userWay","setUserWay","current","setCurrent","content","setContent","card","setCard","setAnswers","lastStep","Story","answers","buttons","element","map","button","onClick","target","text","input","Check","elements","onChange","e","value","autoFocus","defaultValue","forEach","answer","includes","toLowerCase","undefined","el","useEffect","length","style","backgroundImage","module","isFinished","callback","updateStoryModule","name","media","image","className","wrapper","alt","title","defaultStyle","transition","opacity","transitionStyles","entering","entered","exiting","exited","in","timeout","state","cardsList","position","html","dangerouslySetInnerHTML","__html","answersList","slice","href","config","repo","sound","min","max","partsX","partsY","exports","Module","React","lazy","fallback","webpackAsyncContext","req","then","__webpack_require__","o","Error","code","keys","Object","id"],"mappings":"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","file":"static/js/1.d808a559.chunk.js","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport {Transition} from \"react-transition-group\";\r\nimport config from \"../../../../../../config\";\r\nimport style from './index.module.css'\r\nimport Story from \"./components/story\";\r\nimport Module from '../../../modules/modules'\r\n\r\n// TODO: попробовать использовать не Img, а Div-блоки с фоновыми кусками изображения [UPD: отклонено / DIV не содержат onLoad обработчика + коробят изображение по соотношению]\r\n\r\nlet Sound = {\r\n    audio: new Audio() || false,\r\n    settings: {\r\n        defaultMuted: false,\r\n        defaultVolume: .2,\r\n        defaultLoop: true\r\n    },\r\n    set: function (url) {\r\n        url = ''+url\r\n        // const check = await isUrlFound(url)\r\n        // if (!check) return\r\n        if (this.audio.src===\"\" || this.audio.src===null) {\r\n            this.audio.src = url\r\n            this.audio.volume = this.settings.defaultVolume\r\n            this.settings = {\r\n                ...this.settings,\r\n                volume: this.settings.defaultVolume\r\n            }\r\n            this.audio.loop = this.settings.defaultLoop\r\n            this.audio.muted = this.settings.defaultMuted\r\n            this.audio.play().catch(err => console.log(err))\r\n        } else if (this.audio.src!==url) {\r\n            this.update(url).catch()\r\n        }\r\n    },\r\n    update: async function (url) {\r\n        const delay = (ms) => { return new Promise(resolve => setTimeout(resolve, ms)); }\r\n        const timer = 600\r\n        const volumeDelta = this.audio.volume/(timer*.5)\r\n\r\n        for (let i = timer*.5-1; i >= 0; i--) {\r\n            await delay(1)\r\n            let vol = this.audio.volume - volumeDelta\r\n            this.audio.volume = vol<0 ? 0 : vol\r\n        }\r\n        this.audio.pause()\r\n        this.audio.src = url\r\n        this.audio.play().catch()\r\n        for (let i = 0; i <= timer*.5-1; i++) {\r\n            await delay(1)\r\n            let vol = this.audio.volume + volumeDelta\r\n            this.audio.volume = vol<=this.settings.volume ? vol : this.settings.volume\r\n        }\r\n    },\r\n    change: {\r\n        muted: function (val) {\r\n            Sound.settings.muted = val\r\n            Sound.audio.muted = val\r\n        },\r\n        volume: function (val) {\r\n            Sound.settings.volume = val*.01\r\n            Sound.audio.volume = val*.01\r\n            if (val===0) {\r\n                this.muted(true)\r\n            } else if (Sound.settings.muted) {\r\n                this.muted(false)\r\n            }\r\n            console.log(Sound.settings)\r\n        }\r\n    }\r\n}\r\nlet Video = {\r\n    video: null,\r\n    settings: {\r\n        autoPlay: true,\r\n        muted: true,\r\n        controls: false,\r\n        loop: true\r\n    },\r\n    set: function (video) {\r\n        return (\r\n            <video\r\n                muted={video.muted || this.settings.muted}\r\n                autoPlay={video.autoPlay || this.settings.autoPlay}\r\n                controls={video.controls || this.settings.controls}\r\n                loop={video.loop || this.settings.loop}\r\n            >\r\n                <source src={video.src} type={`video/${video.format || 'mp4'}`}/>\r\n            </video>\r\n        )\r\n    }\r\n}\r\n\r\nconst Index = (props) => {\r\n    const [userWay, setUserWay] = useState([0])\r\n    const [current, setCurrent] = useState({})\r\n    const [content, setContent] = useState(null)\r\n    const [card, setCard] = useState(null)\r\n\r\n    const setAnswers = (lastStep) => {\r\n        // - Кнопки\r\n        if (Story[lastStep].answers.buttons) {\r\n            const element = Story[lastStep].answers.buttons.map((button,i) =>\r\n                <button onClick={() => setUserWay([...userWay, button.target])} key={i}>{button.text}</button>\r\n            )\r\n            setCard(element)\r\n        }\r\n        // - Ввод\r\n        if (Story[lastStep].answers.input) {\r\n            const answers = Story[lastStep].answers.input\r\n            const Check = (text) => {\r\n                let elements = [<input type={'text'} onChange={(e) => Check(e.target.value)} autoFocus={true} defaultValue={text}/>]\r\n                answers.forEach(answer => {\r\n                    if (answer.answers.includes(text.toLowerCase())) {\r\n                        /*<input type={'text'} onChange={(e) => Check(e.target.value)} autoFocus={true}/>*/\r\n                        elements = [...elements, <button onClick={() => setUserWay([...userWay, answer.target])}>{answer.text}</button>]\r\n                    }\r\n                })\r\n\r\n                if (element!==undefined) {\r\n                    setCard(<>{elements.map(el => el)}</>)\r\n                }\r\n            }\r\n            const element = <><input type={'text'} onChange={(e) => Check(e.target.value)} autoFocus={true}/></>\r\n            setCard(element)\r\n        }\r\n    }\r\n    const updateStoryModule = (Story, lastStep) => {\r\n        Story[lastStep].content.module = {\r\n            ...Story[lastStep].content.module,\r\n            settings: {\r\n                ...Story[lastStep].content.module.settings,\r\n                isFinished: true\r\n            }\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        // Reset\r\n        setContent(null)\r\n\r\n        // Const\r\n        const lastStep = userWay[userWay.length-1]\r\n\r\n        // Стили\r\n        if (Story[lastStep].style && Story[lastStep].style.backgroundImage) {\r\n            setCurrent({\r\n                ...current,\r\n                style: {\r\n                    ...current.style,\r\n                    backgroundImage: `url(\"${Story[lastStep].style.backgroundImage}\")`\r\n                }\r\n            })\r\n        }\r\n\r\n        // Контент\r\n        if (Story[lastStep].content) {\r\n            if (Story[lastStep].content.module) {\r\n                // - Модули\r\n                const Reaction = () => {\r\n                    updateStoryModule(Story, lastStep)\r\n                    setAnswers(lastStep)\r\n                }\r\n                const settings = {\r\n                    isFinished: false,\r\n                    ...Story[lastStep].content.module.settings,\r\n                    callback: Reaction\r\n                }\r\n                setContent(<Module name={Story[lastStep].content.module.name} settings={settings}/>)\r\n            } else if (Story[lastStep].content.media) {\r\n                // - Медиа\r\n                // - - Изображение\r\n                if (Story[lastStep].content.media && Story[lastStep].content.media.image) {\r\n                    if (Story[lastStep].content.media.image.src && Story[lastStep].content.media.image.src !== null) {\r\n                        setContent(<div className={style.wrapper}><img src={Story[lastStep].content.media.image.src}\r\n                                                                       alt={'Изображение не прогружено'}\r\n                                                                       title={Story[lastStep].content.media.image.name ? Story[lastStep].content.media.image.name : null}/>\r\n                        </div>)\r\n                    }\r\n                }\r\n                // - - Аудио\r\n                if (Story[lastStep].content.media && Story[lastStep].content.media.audio) {\r\n                    if (Story[lastStep].content.media.audio.src && Story[lastStep].content.media.audio.src !== null) {\r\n                        Sound.set(Story[lastStep].content.media.audio.src)\r\n                    }\r\n                }\r\n                // - - Видео\r\n                if (Story[lastStep].content.media && Story[lastStep].content.media.video) {\r\n                    if (Story[lastStep].content.media.video.src && Story[lastStep].content.media.video.src !== null) {\r\n                        setContent(Video.set(Story[lastStep].content.media.video))\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Карта ответов\r\n        if (Story[lastStep].answers) {\r\n            if (Story[lastStep].content && Story[lastStep].content.module) {\r\n                setCard(null)\r\n            } else {\r\n                setAnswers(lastStep)\r\n            }\r\n        }\r\n\r\n    }, [userWay])\r\n\r\n    const duration = 1500\r\n    const defaultStyle = {\r\n        transition: `opacity ${duration}ms ease-in-out`,\r\n        opacity: 0,\r\n    }\r\n    const transitionStyles = {\r\n        entering: { opacity: 1 },\r\n        entered:  { opacity: 1 },\r\n        exiting:  { opacity: 0 },\r\n        exited:  { opacity: 0 },\r\n    };\r\n\r\n    return(\r\n        <main style={{backgroundImage:current.style && current.style.backgroundImage && current.style.backgroundImage}}>\r\n\r\n            <Transition in={content} timeout={duration}>\r\n                {state => (\r\n                    <div className={style.content} style={{\r\n                        ...defaultStyle,\r\n                        ...transitionStyles[state]\r\n                    }}>\r\n                            {content && content}\r\n                </div>\r\n                )}\r\n            </Transition>\r\n            <div className={style.cardsList} style={{position:'relative'}}>\r\n                {Story[userWay[userWay.length - 1]].title &&\r\n                    <h3>{Story[userWay[userWay.length - 1]].title}</h3>\r\n                }\r\n                {Story[userWay[userWay.length - 1]].text &&\r\n                    <p>{Story[userWay[userWay.length - 1]].text}</p>\r\n                }\r\n                {(Story[userWay[userWay.length - 1]].html && !Story[userWay[userWay.length - 1]].text) &&\r\n                    <p dangerouslySetInnerHTML={{__html: Story[userWay[userWay.length - 1]].html}}/>\r\n                }\r\n                <div className={style.answersList}>\r\n                    {/*{Story[userWay[userWay.length-1]].answers && Story[userWay[userWay.length-1]].answers.map((button,i) =>*/}\r\n                    {/*    <button onClick={() => {setUserWay([...userWay, button.target])}} key={i}>{button.text}</button>*/}\r\n                    {/*)}*/}\r\n                    {card}\r\n                    {userWay.length > 1 &&\r\n                        <button onClick={() => {setUserWay(userWay.slice(0, userWay.length - 1))}}>Вернуться</button>\r\n                    }\r\n                </div>\r\n                <div className={style.controls}>\r\n                    <a href={`${config.repo}/`}>Домой</a>\r\n                    <div className={style.sound}>\r\n                        <button\r\n                            onClick={(e) => {\r\n                                const val = Sound.settings.muted ? false : true\r\n                                Sound.change.muted(val)\r\n                            }}\r\n                        >[no.sound/sound]</button>\r\n                        <input\r\n                            type={'range'}\r\n                            min={0}\r\n                            max={100}\r\n                            defaultValue={Sound.settings.defaultVolume*100}\r\n                            title={Sound.settings.muted ? 'Без звука' : `${Sound.settings.volume*100}/100`}\r\n                            onChange={(e) => {\r\n                                Sound.change.volume(e.target.value)\r\n                                e.target.title = Sound.settings.muted ? 'Без звука' : `${Sound.settings.volume*100}/100`\r\n                            }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </main>\r\n    )\r\n}\r\n\r\nexport default Index","let Story = {\r\n    0: {\r\n        title: null,\r\n        text: `Приветствую, Буревестник! Взгляни на эти варианты. Они все ведут на диалоговые страницы-примеры`,\r\n        style: {},\r\n        content: {\r\n            media: {\r\n                image: {},\r\n                audio: {}\r\n            }\r\n        },\r\n        answers: {\r\n            buttons: [\r\n                {\r\n                    text: '(Изменение фона)',\r\n                    target: 1\r\n                },\r\n                {\r\n                    text: '(Контент-изображение)',\r\n                    target: 2\r\n                },\r\n                {\r\n                    text: '(Контент-аудио)',\r\n                    target: 3\r\n                },\r\n                {\r\n                    text: '(Контент-видео)',\r\n                    target: 4\r\n                },\r\n                {\r\n                    text: '(Ответ с вводом)',\r\n                    target: 5\r\n                },\r\n                {\r\n                    text: '(Минигры: пазл)',\r\n                    target: 6\r\n                }\r\n            ]\r\n        }\r\n    },\r\n    1: {\r\n        title: null,\r\n        text: `Изменение фона при переходе`,\r\n        style: {\r\n            backgroundImage: 'https://alloder.pro/uploads/monthly_2020_10/_MLwj6qpyM8.jpg.36d77f7f2b8d4f89e14243174814bed8.jpg'\r\n        },\r\n        answers: {\r\n            buttons: [\r\n                {\r\n                    text: 'Далее (Контент-изображение)',\r\n                    target: 2\r\n                },\r\n                {\r\n                    text: 'Вернуться к началу',\r\n                    target: 0\r\n                }\r\n            ]\r\n        }\r\n    },\r\n    2: {\r\n        title: null,\r\n        text: `Возможно встраивание контента в виде изображений`,\r\n        content: {\r\n            media: {\r\n                image: {\r\n                    name: null,\r\n                    src: 'https://allods.mail.ru/media/originals/5fca176200fb0.jpg'\r\n                }\r\n            }\r\n        },\r\n        answers: {\r\n            buttons: [\r\n                {\r\n                    text: 'Далее (Контент-аудио)',\r\n                    target: 3\r\n                },\r\n                {\r\n                    text: 'Вернуться к началу',\r\n                    target: 0\r\n                }\r\n            ]\r\n        }\r\n    },\r\n    3: {\r\n        title: null,\r\n        text: `Возможно встраивание контента в виде аудио. Регулировака громкости для пользователя в комплекте :)`,\r\n        content: {\r\n            media: {\r\n                audio: {\r\n                    name: null,\r\n                    src: 'https://allods.mail.ru/media/mp3/5fc0f0274583f.mp3'\r\n                }\r\n            }\r\n        },\r\n        answers: {\r\n            buttons: [\r\n                {\r\n                    text: 'Далее (Контент-видео)',\r\n                    target: 4\r\n                },\r\n                {\r\n                    text: 'Вернуться к началу',\r\n                    target: 0\r\n                }\r\n            ]\r\n        }\r\n    },\r\n    4: {\r\n        title: null,\r\n        text: `Возможно встраивание контента в виде видео`,\r\n        content: {\r\n            media: {\r\n                video: {\r\n                    src: 'https://vk.com/doc280095054_615730573?hash=d3d20812e25cc4cede&dl=41ba114594bc175f1a',\r\n                    format: 'mp4'\r\n                }\r\n            }\r\n        },\r\n        answers: {\r\n            buttons: [\r\n                {\r\n                    text: 'Далее (Со строкой ввода)',\r\n                    target: 5\r\n                },\r\n                {\r\n                    text: 'Вернуться к началу',\r\n                    target: 0\r\n                }\r\n            ]\r\n        }\r\n    },\r\n    5: {\r\n        title: null,\r\n        text: 'Возможно задание строки ввода с заготовленными вариантами и ветвлением. Кнопки перехода не появятся до ввода верного варианта, регистр при вводе не имеет значения. P.S. Верный ответ \"Драконы\" или \"Эдем\" или \"Старец\", а для перехода дальше \"Пазл\" или \"Игра\" (регистр не имеет значения).',\r\n        answers: {\r\n            buttons: [\r\n                {\r\n                    text: 'Далее (Пазл)',\r\n                    target: 6\r\n                },\r\n            ],\r\n            input: [\r\n                {\r\n                    answers: ['драконы', 'старец'],\r\n                    text: 'Дальше #1',\r\n                    target: 0\r\n                },\r\n                {\r\n                    answers: ['эдем'],\r\n                    text: 'Дальше #2',\r\n                    target: 0\r\n                },\r\n                {\r\n                    answers: ['старец'],\r\n                    text: 'Дальше #3',\r\n                    target: 0\r\n                },\r\n                {\r\n                    answers: ['пазл', 'игра'],\r\n                    text: 'К игре (пазл)',\r\n                    target: 6\r\n                }\r\n            ]\r\n        }\r\n    },\r\n    6: {\r\n        title: null,\r\n        text: 'Возможен контент в виде мини-игр',\r\n        content: {\r\n            module: {\r\n                name: 'puzzle',\r\n                settings: {\r\n                    src: 'https://allods.mail.ru/media/originals/5fca168ceae6e.jpg',\r\n                    partsX: 10,\r\n                    partsY: 5\r\n                }\r\n            }\r\n        },\r\n        answers: {\r\n            buttons: [\r\n                {\r\n                    text: 'Вернуться к началу',\r\n                    target: 0\r\n                }\r\n            ],\r\n            input: [\r\n                {\r\n                    answers: ['финал'],\r\n                    text: 'К началу',\r\n                    target: 0\r\n                }\r\n            ]\r\n        }\r\n    }\r\n}\r\n\r\nexport default Story","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"event1_content__Nmm5f\",\"wrapper\":\"event1_wrapper__QnViW\",\"cardsList\":\"event1_cardsList__3mLMf\",\"answersList\":\"event1_answersList__21KE6\",\"controls\":\"event1_controls__2Bm9d\",\"sound\":\"event1_sound__29R7m\"};","import React, {Suspense} from \"react\";\r\n\r\nconst Module = (props) => {\r\n    const Module = React.lazy(() => import(`./${props.name}/index`))\r\n    return (\r\n        <Suspense fallback={<div>Загрузка...</div>}>\r\n            <Module settings={props.settings}/>\r\n        </Suspense>\r\n    )\r\n}\r\n\r\nexport default Module","var map = {\n\t\"./puzzle/index\": 29\n};\n\nfunction webpackAsyncContext(req) {\n\treturn Promise.resolve().then(function() {\n\t\tif(!__webpack_require__.o(map, req)) {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t}\n\n\t\tvar id = map[req];\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 51;\nmodule.exports = webpackAsyncContext;"],"sourceRoot":""}